# Settings in the [build] context are global and are applied to all contexts
# unless otherwise overridden by more specific contexts.
[build]
  # Directory that contains the deploy-ready HTML files and assets generated by
  # the build. This is relative to the base directory if one has been set, or the
  # root directory if a base has not been set.
  publish = "dist/"

  # Default build command.
  command = "npm run build:prod"

# Branch Deploy context: all deploys that are not from a pull/merge request or
# from the Production branch will inherit these settings.
[context.branch-deploy]
  command = "npm run build:stage"

# Redirect Netlify subdomain to primary domain
[[redirects]]
  from = "https://wwdcscholars.netlify.app"
  to = "https://www.wwdcscholars.com"
  status = 301
  force = true

# Redirect staging Netlify subdomain to staging primary domain
[[redirects]]
  from = "https://develop--wwdcscholars.netlify.app"
  to = "https://develop.wwdcscholars.com"
  status = 301
  force = true

# App Store Redirect
[[redirects]]
  from = "/app"
  to = "https://apps.apple.com/app/wwdcscholars/id1459158255?mt=8"
  status = 301
  force = true

# Discord Redirect
[[redirects]]
  from = "/discord"
  to = "https://discord.gg/Vn5bHDg"
  status = 301
  force = true

# SPA History Pushstate
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
